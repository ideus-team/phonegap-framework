#Registrator Module

Регистратор - это модуль который регистрирует Представления(так же и попапы), Модели и Коллекции для приложения. Когда вы регистрируете какой-либо компонент, то он будет доступен в App под своим именем, которое вы ему присвоите в момент регистрации.


Регистратор содержит три метода для регистрации компонентов:

- Registrator.view
- Registrator.model
- Registrator.collection

> Обязательным параметром для всех компонентов является свойство ```name```. Как вы его назовете, так и сможете достучаться до него через App.view[name]\App.models[name]\App.collections[name]

> Все опции, которые вы указываете при регистрации компонента расширяются или заменяются в том или ином компоненте

##View

```javascript
Registrator.view(name, options)
```

###Options

Имя свойства    | Default value | Описание
------------ | ------------- | -------------
header     | false | Укажет, есть ли у вашей вьюшки шапка
footer     | false | Укажет, есть ли у вашей вьюшки подвал 
isPopup     | false | Флаг указания, является ли вьюшка попапом
models, collections   | Empty array [] | Массив для задания зависимостей вьюхи от моделей и коллекций. Если для отображения вьюшки нужно запросить какие-то данные, для этих данных создается модель или коллекция и пока данные не запросятся, то вьюшка не отрисутется.
datas     | - | Для моделей и коллекций можно задать изначальные данные относительно представления.
template     | - | По умолчанию, вьюшка берет шаблон по имени самой вьюшки из объекта шаблонов. Но вы можете указать шаблон отдельно передав его в регистрации компонента (см пример ниже)

##Events

У каждого представления есть предустановленные событийные функции. Вам нужно просто навесить опредилённый класс на элемент и в пределах текущей вьюшки вызовется соответствующая функция. Вы так же можете добавлять события отдельно для каждой вьюшки. Это делается уже при регистрации компонента. (см пример ниже)

Класс события    | Функция события | Описание
------------ | ------------- | -------------
.js-pageLink     | pageLink | Собирает все значения data-аттрибутов и передает их в ```App.navigate```. При этом главным аттрибутом является ```data-page="hash"``` - который служит для навигации по страницам.
.js-popup     | openPopup | Аналогичен ```.js-pageLink```, но открывает попап и не записывает хеш в историю. В данном случае обязательным хешом должна быть конструкция ```data-page="popup/YOUR_POPUP_ID"```.
.js-popupClose     | popupClose | Закрывает все попапы :)

Стоит заметить, что при разработке приложения имеет смысл расширять данный стек предустановленных событий, чтобы они наслеловались всем вьюшкам вашего приложения.

###Пара примеров

1. Небольшой пример регистрации представления:

```javascript
import Register from '../../modules/registrator';

Register.view('home', {

  events: {
    'submit .js-form': 'addUser'
  }

});
```

2. Пример с передачей отдельного шаблона под вьюшку:

```javascript
import Register from '../../modules/registrator';
import * as templates from '../templates/templates';

Register.view('home', {

  template: templates.homeTemplate

});
```

##Model

```javascript
Registrator.view(name, options)
```

###Options

Имя свойства    | Default value | Описание
------------ | ------------- | -------------
idAttribute     | '_id' | Название идентификатора модели [BackboneJS doc](http://backbonejs.ru/#Model-idAttribute)
loadPerRender     | false | Флаг, отвечающий, нужно ли запрашивать данные для модели с сервера, перед тем, как отобразить представление, которое зависит от данной модели
defaults     | - | Расширяемые значения по умолчанию у модели [BackboneJS doc](http://backbonejs.ru/#Model-defaults)
bindModel   | - | Функция, которая следит за изменениями модели и отрисовывает модель, если та изменилась.
successFetch     | - | Функция, которая вызывается после того, как модель запросила данные с сервера. В любой момент вы можете ее переписать под себя при регистрации компонента
createFetch     | - | Функция создает параметры, которые отправятся на сервер. Принимает несколько параметров: `page, callback, params = this.fetchParams`. `page` - страница, на которую перейдет приложение после того, как данные запросятся с сервера. `callback` - функция, которая выполнится после того, как данные запросятся с сервера, но перед тем, как приложение перейдет на страницу `page`. `params = this.fetchParams` - по умолчанию вы должны задать параметры в `fetchParams` с которыми модель будет сопоставлять значения `defaults` модели и собирать в объект для отправки на сервер. Но так же вы можете передать этот объект для сравнения сами.